!function(e,t,n){var r,i,l,o;l={data:[],animationSpeed:400,folderTrigger:"click",hideFiles:!1,fileContainer:null,nodeName:"name",nodeTitle:"name"},r=function(){function t(t,n){this.element=t,this.settings=e.extend({},l,n),this._defaults=l,this.init()}return t.prototype.init=function(){var t;t=JSON.parse(this.settings.data),this._createTree.call(this,this.element,t),e(this.element).addClass("filetree"),this._addListeners()},t.prototype._createTree=function(t,r){var i,l,o,a,s,d,c,f,p,h,u,m,g,v,C,y;for(i=e(t),h=[],u=[],m=0,v=r.length;v>m;m++)a=r[m],"folder"===a.type&&u.push(a),"file"===a.type&&h.push(a);for(h.sort(this._nameSort),u.sort(this._nameSort),r=u.concat(h),f="ul"===i.prop("tagName").toLowerCase()?i:e(n.createElement("ul")),g=0,C=r.length;C>g;g++){s=r[g],c=e(n.createElement("li")).addClass(s.type),"file"===s.type&&this.settings.hideFiles===!0&&c.addClass("hidden"),l=e(n.createElement("a")).attr("href","#").attr("title",s[this.settings.nodeTitle]).html(s[this.settings.nodeName]);for(d in s)p=s[d],s.hasOwnProperty(d)&&"children"!==d&&l.data(d,p);c.append(l),f.append(c),"folder"===s.type&&"undefined"!=typeof s.children&&s.children.length>0&&(c.addClass("collapsed").addClass("has-children"),o=e(n.createElement("button")).addClass("arrow"),c.prepend(o),this.settings.hideFiles===!0&&(y=e.grep(s.children,function(e){return"folder"===e.type}),y.length>0&&(c.removeClass("collapsed").removeClass("has-children"),c.find("button").removeClass("arrow").addClass("no-arrow"))),this._createTree.call(this,c,s.children))}i.append(f)},t.prototype._openFolder=function(t){var n,r,i,l,o,a;return r=e(this.element),n=e(t),o=this,l=e.Event("open.folder.filetree"),i=e.Event("opened.folder.filetree"),a=n.find("ul").eq(0),r.trigger(l,n),a.slideDown(o.settings.animationSpeed,function(){n.removeClass("collapsed").addClass("expanded"),a.removeAttr("style"),r.trigger(i,n)}),!1},t.prototype._closeFolder=function(t){var n,r,i,l,o,a;return r=e(this.element),n=e(t),o=this,l=e.Event("close.folder.filetree"),i=e.Event("closed.folder.filetree"),a=n.find("ul").eq(0),r.trigger(l,n),a.slideUp(o.settings.animationSpeed,function(){n.removeClass("expanded").addClass("collapsed"),a.removeAttr("style"),r.trigger(i,n)}),!1},t.prototype._clickFolder=function(t){var n,r,i;return r=e(this.element),n=e(t),i=e.Event("click.folder.filtree"),r.trigger(i,n),!1},t.prototype._clickFile=function(t){var n,r,i;return r=e(this.element),n=e(t),i=e.Event("click.file.filtree"),r.trigger(i,r),!1},t.prototype._addListeners=function(){var t,n;t=e(this.element),n=this,t.on("click","li.folder.collapsed.has-children > button.arrow",function(){return n._openFolder(e(this).parent("li"))}),t.on("click","li.folder.expanded.has-children > button.arrow",function(){return n._closeFolder(e(this).parent("li"))}),t.on("click","li.folder > a",function(t){return n._clickFolder(e(this).parent("li")),t.preventDefault(),t.stopPropagation()}),t.on("click","li.file > a",function(t){return n._clickFile(e(this).parent("li")),t.preventDefault()})},t.prototype._nameSort=function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:e.name.toLowerCase()>t.name.toLowerCase()?1:0},t}(),i=function(t){return this.each(function(){var n,i;return n=e(this),i=n.data("$.filetree"),i||n.data("$.filetree",new r(this,t)),"string"==typeof t?i[t].call(n):void 0})},o=e.fn.filetree,e.fn.filetree=i,e.fn.filetree.Constructor=r,e.fn.filetree.noConflict=function(){return e.fn.filetree=o,this}}(jQuery,window,document);